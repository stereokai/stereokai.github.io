/*!
 * Wix-Templates
 * Home templates browser - front end
 * 
 * @author Tom Alon
 * @version 0.0.1
 * Copyright 2016. Proprietary licensed.
 */
!function(e,t,n){"use strict";function o(e){C&&S.then(e)}function i(e,n){function o(){var o=new Promise(function(o,i){var s=t.createElement("script");s.type="text/javascript",s.async=n||!0,s.src=e,s.onerror=i,s.onload=o,t.head.appendChild(s)});return o}return o}function s(e,t,n){var o;return function(){var i=this,s=arguments,r=function(){o=null,n||e.apply(i,s)},a=n&&!o;clearTimeout(o),o=setTimeout(r,t),a&&e.apply(i,s)}}function r(){return T||(T=t.querySelectorAll(".tg-information")),T}function a(){return H||(H=t.querySelectorAll(".tg-template-img")),H}function l(){return k||(k=t.querySelectorAll(".tg-hover > input[type=checkbox]")),k}function c(){return q||(q=t.querySelectorAll(".tg-hover")),q}function d(){return isBlink||isSafari||isEdge?t.body.scrollTop:t.documentElement.scrollTop}function u(e){isBlink||isSafari||isEdge?t.body.scrollTop=e:t.documentElement.scrollTop=e}function m(){return Math.max(0,I.clientHeight-e.innerHeight)}function v(e){P.value=e}function f(){e.removeEventListener("load",f);var t=s(function(){v(m())},250);setTimeout(function(){v(m())},0),e.removeEventListener("resize",t),e.addEventListener("resize",t,!0)}function p(){function n(){v=r(),f=a(),w.call(f,i)}function i(e,t){function n(){l(f[t].parentElement.parentElement),o(function(){c(v[t])})}e.complete?n():e.addEventListener("load",n,!1)}function l(e){e.classList.remove("-hidden")}function c(e){var t=e.firstElementChild;e.classList.add("nano"),t.classList.add("nano-content"),e.clientHeight>=t.scrollHeight&&(t.style.overflowY="scroll"),o(function(){m(e,function(){x(e).nanoScroller({preventPageScrolling:!0,disableResize:!0,sliderRatio:.85})})})}function d(){v=r(),w.call(v,u)}function u(e){e.nanoscroller&&m(e,function(){e.nanoscroller.reset()})}function m(e,t){e.classList.add("-visible"),t(),e.classList.remove("-visible")}var v,f,p=t.querySelector(".tg-container"),g=s(d,250);return o(function(){e.removeEventListener("resize",g),e.addEventListener("resize",g,!0),p.removeEventListener("transitionend",d),p.addEventListener("transitionend",d,!1)}),{init:n,update:d,accessInfoScroller:m}}function g(){function n(t){var n=e.getComputedStyle(this).getPropertyValue("opacity");1==n?this.classList.add("-active"):this.classList.remove("-visible")}function o(e){var t=i(this);t&&t.classList.add("-visible")}function i(e){return e.classList.contains("tg-thumbnail")?e.children[2]:e.classList.contains("tg-hover")?e:!1}var s=(t.querySelector(".tg-gallery"),a()),r=c();s=j.call(s,function(e){return e.parentElement}),w.call(s,function(e,t){e.addEventListener("mouseleave",o,!1),r[t].addEventListener("mouseleave",o,!1),r[t].addEventListener("mouseenter",n,!1),r[t].removeEventListener("transitionend",n),r[t].addEventListener("transitionend",n,!1)})}function L(){var e=l(),t=r(),n=a();w.call(n,function(n,i){n.parentElement.addEventListener("mouseleave",function(){function s(){e[i].checked=!1,t[i].nanoscroller&&o(function(){z.accessInfoScroller(t[i],function(){t[i].nanoscroller.scrollTop(0)})}),n.parentElement.removeEventListener("transitionend",s)}n.parentElement.addEventListener("transitionend",s,!1)})})}function h(){function n(){c=t.getElementById("sidebar"),u=t.getElementById("sb-switch"),f=t.getElementById("sb-toggle"),p=t.getElementById("sb-collapse"),g=t.querySelector(".sbs-stroke"),c.removeEventListener("transitionend",s),c.addEventListener("transitionend",s,!1),g.removeEventListener("transitionend",r),g.addEventListener("transitionend",r,!1),u.addEventListener("click",function(){this.checked?o():i()}),p.addEventListener("click",function(){u.click()}),e.addEventListener("scroll",l,!1)}function o(){f.classList.add("-transitioning"),I.classList.add("-sidebar-open"),I.classList.remove("-sidebar-closed"),d()>R&&y(!0),l(!0)}function i(){u.classList.remove("-hidden"),f.classList.add("-transitioning"),p.classList.add("-hidden"),I.classList.add("-sidebar-closed"),I.classList.remove("-sidebar-open"),l(!0)}function s(){a(),l(!0)}function r(){f.classList.remove("-transitioning"),u.checked&&(p.classList.remove("-hidden"),u.classList.add("-hidden"))}function a(){v(m())}function l(e){if(e===!0||!u.checked){var t=d(),n=I.scrollHeight,o=350,i=65;t>=R?n+R-o>t+i?(u.classList.remove("-to-bottom"),f.classList.remove("-to-bottom"),u.classList.add("-fixed"),f.classList.add("-fixed")):(u.classList.add("-to-bottom"),f.classList.add("-to-bottom")):(u.classList.remove("-to-bottom"),f.classList.remove("-to-bottom"),u.classList.remove("-fixed"),f.classList.remove("-fixed"))}}var c,u,f,p,g;return{init:n,track:l}}function y(n){n?E():t.documentElement.nanoscroller?t.documentElement.nanoscroller.scrollTop(0):e.scrollTo(0,0)}function E(){var e=d(),t=e/12,n=Math.round(30/e)+10;u(e-t),D.track(!0),e>0&&setTimeout(E,n)}function b(){function n(s){e.removeEventListener("load",n);var r=t.getElementById("sidebar"),a=t.querySelectorAll(".sb-lvl-1-cat.-active")[0],l=t.querySelectorAll(".sb-lvl-2-cat.-active")[0],c=s===!0,m=a||l||!1,v=m&&i(m.children[1]||m.firstElementChild);if(m&&(c||!v)){c||u(R);var f=o(m,t.body),p=f-r.clientHeight/2+R+21,g=r.scrollHeight-r.clientHeight;e.setTimeout(function(){r.scrollTop=g>0?Math.min(p,g):p,c&&d()>0&&y()},1)}}function o(e,t){var n=t.getBoundingClientRect(),o=e.getBoundingClientRect(),i=o.top-n.top;return i}function i(n){var o=n.getBoundingClientRect();return o.bottom<=(e.innerHeight||t.documentElement.clientHeight)}return{focus:n}}var S,x,C=isBlink;C&&(S=i("//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.js")()["catch"](i("assets/js/jquery.min.js")).then(function(){x=jQuery.noConflict()}).then(i("assets/js/jquery.nanoscroller.js")));var B="/html/";location.pathname.split(B)[0],e.location.hostname.substring(e.location.hostname.indexOf("."));e.location.origin||(e.location.origin=e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:""));var R,T,H,k,q,w=Array.prototype.forEach,j=Array.prototype.map,I=t.getElementsByTagName("main")[0],A="onwheel"in t||t.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];console.log("scroll events:",A);var P={value:0},M=function(e){"interactive"==t.readyState||"complete"==t.readyState?e():t.addEventListener("DOMContentLoaded",e)};M(function(){I.classList.remove("wix-cloak")}),M(function(){R=parseFloat(e.getComputedStyle(t.body).getPropertyValue("padding-top"))}),e.addEventListener("load",f);var z=p();M(z.init),M(g),M(L);var D=h();M(D.init),C&&M(function(){o(function(){t.documentElement.classList.add("nano"),t.body.classList.add("nano-content"),x(t.documentElement).nanoScroller();var n=!1;e.addEventListener("scroll",function(){n?o():(t.documentElement.classList.add("-nano-visible"),n=!0)},!1);var o=s(function(){t.documentElement.classList.remove("-nano-visible"),n=!1},1200)})}),M(function(){function n(){var t=d(),n=I.scrollHeight,o=t+e.innerHeight;t>=R?n+R>o?s():r():i()}function i(){b.classList.remove("-to-bottom"),b.classList.remove("-fixed"),b.style.top="1px",C&&(b.style.paddingRight=y.nanoscroller.BROWSER_SCROLLBAR_WIDTH+"px",l())}function s(){b.classList.remove("-to-bottom"),b.classList.add("-fixed"),b.style.top="0px",C&&(b.style.paddingRight=0,a())}function r(){b.classList.add("-to-bottom"),b.style.top=P.value-1+"px",C&&(b.style.paddingRight=0,l())}function a(){p.style.position="fixed",p.style.top="-1px",p.style.left=h+"px"}function l(){p.style.top=b.style.top,p.style.position="absolute",p.style.right="6px",p.style.left="auto"}function c(){b.classList.add("nano-content"),x(y).addClass("nano").nanoScroller({forSidebar:!0,sliderRatio:.5})}function u(){var e=f.bind({},new v);e(".sb-sidebar { width: "+(B+y.nanoscroller.BROWSER_SCROLLBAR_WIDTH)+"px}"),e(".sb-sidebar + .nano-pane { transition: transform .1s step-end, opacity .2s ease; }"),e(".-sidebar-closed .sb-sidebar + .nano-pane { opacity: 0; transform: translateX(-312px) }")}function m(){var n;p=t.querySelector(".nano-pane"),n=e.getComputedStyle(p),L=parseFloat(n.getPropertyValue("right")),g=parseFloat(n.getPropertyValue("width")),h=B-g-L}function v(){var e=t.createElement("style");return e.appendChild(t.createTextNode("")),t.head.appendChild(e),e.sheet}function f(e,t){e.insertRule(t,e.cssRules.length)}var p,g,L,h,y,E,b=t.getElementById("sidebar"),S=t.getElementById("gallery-container"),B=(parseFloat(e.getComputedStyle(S).getPropertyValue("padding-bottom")),parseFloat(e.getComputedStyle(b).getPropertyValue("width")));y=t.createElement("div"),y.className="sb-wrapper",I.insertBefore(y,S),E=t.createDocumentFragment(),E.appendChild(b),y.appendChild(E),e.addEventListener("scroll",n,!1);for(var T=A.length;T;)b.addEventListener(A[--T],function(e){var t=-1*e.deltaY,n=d();0>t&&b.classList.contains("-fixed")&&!b.classList.contains("-to-bottom")&&b.scrollTop==b.scrollHeight-b.clientHeight&&n>b.parentElement.offsetTop&&e.preventDefault()},!1);o(function(){c(),u(),m()})});var F=b();e.addEventListener("load",F.focus)}(window,document);